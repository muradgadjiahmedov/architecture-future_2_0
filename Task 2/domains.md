# Task2 — Домены и потоки данных (Future 2.0)

## 1) Предлагаемое разбиение на домены

### A. Clinic Domain (Операции клиник)
**Назначение:** запись, визиты, услуги, назначения, факты оказания услуг, статусы, операционные справочники.  
**Данные:** события визита/услуги, агрегаты по услугам (без медкарт/исследований).  
**Потоки:** публикует события в Event Bus и доменный Data Product для аналитики.

### B. Medical Records Domain (Контур медкарт/исследований — restricted)
**Назначение:** медкарты, истории болезни, результаты исследований/диагностики.  
**Данные:** PII/PHI, медицинские исследования.  
**Правило:** **не попадает в аналитическую витрину** (по условию кейса).  
**Потоки:** доступен только Clinic Domain (для лечения) и AI Domain (для анализа медданных) по защищённым контрактам.

### C. AI/ML Domain (ИИ-сервисы)
**Назначение:** модели, инференс, обучение, фичи, MLOps.  
**Данные:** получает медданные **только** из Medical Records Domain; возвращает результаты (скоринги/рекомендации/метаданные).  
**Потоки в аналитику:** публикует **не-медицинские** результаты (например, тех.метрики, качество модели, сервисные события) и/или агрегированные бизнес-метрики без PHI.

### D. Fintech Domain (Банк и финсервисы)
**Назначение:** счета, платежи, кредиты, транзакции, фин.продукты.  
**Данные:** транзакции, статусы, договоры, платежные события.  
**Потоки:** публикует финансовые события и доменный Data Product для аналитики.

### E. Partner Pharma Domain (Партнёры — фарма)
**Назначение:** интеграции с фарм-компаниями (каталоги, поставки, статусы).  
**Данные:** справочники препаратов, поставки, коммерческие условия.  
**Потоки:** события поставок/каталогов, доменный Data Product.

### F. Partner MedDevice/Electronics Domain (Партнёры — медоборудование)
**Назначение:** интеграции с производителем электроники/медоборудования (устройства, телеметрия, сервис).  
**Данные:** статусы устройств, эксплуатационная телеметрия (без PHI).  
**Потоки:** телеметрия/инциденты → доменный Data Product.

### G. Corporate/Backoffice Domain (HR, Inventory, Finance Reporting Ops)
**Назначение:** персонал, графики, инвентаризация, закупки, бухгалтерские атрибуты.  
**Потоки:** доменные события и Data Products.

### H. Data Platform & Analytics Domain (Витрина данных)
**Назначение:** ingestion/ELT, lakehouse, витрины/март, семантический слой, self-service портал.  
**Правило:** работает на **Data Products** доменов (контракты, владельцы), а не на “ручных” логиках в DWH.  
**Исключения:** медицинские карты/истории/исследования не загружаются в витрину.

### I. Governance & Security Domain
**Назначение:** IAM, политики доступа, каталог, lineage, DQ, шифрование, аудит.  
**Цель:** обеспечить self-service и регуляторику без торможения доменов.

---

## 2) Почему такое разбиение (привязка к бизнес-сценариям)

### Сценарий: “быстрая отчётность и self-service”
- Домен **Data Platform & Analytics** получает стандартизированные **Data Products** от Clinic/Fintech/Backoffice/Partners.
- Семантический слой обеспечивает единые KPI → меньше кастомизаций в BI, быстрее изменения.

### Сценарий: “независимое развитие финтех и ИИ”
- Fintech и AI — отдельные домены со своими данными и жизненным циклом.
- Пересечения оформлены контрактами: AI получает медданные из Medical Records, финтех получает операционные факты (например, факт услуги/счёт) из Clinic.

### Сценарий: “подключение новых бизнесов (фарма/электроника)”
- Партнёрские домены подключаются как новые источники событий и Data Products.
- Аналитика масштабируется добавлением новых Data Products, без “впихивания” логики в DWH.

---

## 3) Бизнес-выгоды (аргументация)

- **Снижение зависимости от DWH:** бизнес-логика переносится в домены и в семантический слой, DWH перестаёт быть монолитом.
- **Ускорение time-to-market:** домены могут выпускать изменения автономно, не ломая общий контур.
- **Масштабирование экосистемы:** добавление нового направления = новый домен + контракты + Data Product.
- **Регуляторика/ИБ:** Medical Records вынесен в защищённый контур; витрина данных не содержит PHI/результатов исследований.
